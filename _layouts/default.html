<!DOCTYPE html>
<html lang="{{ page.lang | default: site.lang | default: 'en' }}">

{%- include head.html -%}

<body class="{% if site.darkmode == true and site.darkmode != 'never' %}dark{% endif %}">

  {%- include header.html -%}

  <main class="page-content" aria-label="Content">
    <div class="wrapper">
      
      <!-- Table of Contents Section -->
      <button id="toggle-toc" onclick="toggleTOC()">Toggle Table of Contents</button>
      <div id="toc-container" style="display:none;">
        <div class="toc-wrapper">
          {% include toc.html html=content %}
        </div>
      </div>
      
      {%- if jekyll.environment == 'production' and site.gtm -%}
        {%- include gtm_body.html -%}
      {%- endif -%}

      {%- include about.html -%}

      {%- if site.version == 2 -%}
        {% for section in site.content %}
          <div class="container {{ section.layout }}-container">
            <h3 id="{{ section.title | slugify }}">{{ section.title }}</h3>
            {% include {{ section.layout | prepend: "section-" | append: ".html" }} content=section.content %}
          </div>
        {% endfor %}
      {% else %}
        {%- include v1/default.html -%}
      {%- endif -%}
    </div>
  </main>

  {%- include footer.html -%}
  
  {% if site.darkmode == false %}
    <script src="{{ '/assets/js/index.js' | relative_url }}"></script>
  {% endif %}

  <script type="text/javascript">
    function toggleTOC() {
      const tocContainer = document.getElementById("toc-container");
      const tocWrapper = document.querySelector('.toc-wrapper');
      
      if (tocContainer.style.display === "none" || !tocContainer.style.display) {
        tocContainer.style.display = "block";
        setTimeout(() => {
          tocWrapper.style.opacity = "1";
          tocWrapper.style.transform = "translateY(0)";
        }, 10);
      } else {
        tocWrapper.style.opacity = "0";
        tocWrapper.style.transform = "translateY(20px)";
        setTimeout(() => {
          tocContainer.style.display = "none";
        }, 300);
      }
    }
  </script>
  
</body>
</html>
